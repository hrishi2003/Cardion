[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2022-01-11 09:35:06.813309",
  "name": "Sales Invoice-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Sales Invoice', {\n\trefresh(frm) {\n// \t\trefresh_field(\"items\");\n\t},\n\tinpatient:function(frm) {\n\t   if (frm.doc.inpatient) {\n\t\tfrappe.call({\n\t\t\tmethod: \"cardion.docevents.sales_invoice.get_item\",\n\t\t\targs: {\"inpatient\":frm.doc.inpatient},\n\t\t\tcallback: function(r) {console.log('r',r.message,'r');\n\t\t\t\tif (r.message){ console.log('Add Row in Items');\n\t\t\t\tObject.entries(r.message).forEach(([key, value])=>{\n\t\t\t\tvar a = cur_frm.add_child(\"items\");    \n\t            a.item_code=key;\n\t            a.qty=value;\n\t            frappe.db.get_value('Item Price',{'item_code':a.item_code},'price_list_rate', (result)=>{\n\t\t\t               a.rate = result.price_list_rate;\n\t\t\t             \n\t\t\t           });\n                   });\n\n\t\t\t\t}\n\t\t\tcur_frm.refresh_fields(\"items\");\t\n\t\t},\n\t});\n\t  frappe.call({\n\t\t\tmethod: \"cardion.docevents.sales_invoice.get_item1\",\n\t\t\targs: {\"inpatient\":frm.doc.inpatient},\n\t\t\tcallback: function(r) {console.log('r',r.message,'r');\n\t\t\t\tif (r.message){ console.log('Add Row in Items');\n\t\t\t\tObject.entries(r.message).forEach(([key, value])=>{\n\t\t\t\tvar a = cur_frm.add_child(\"items\");    \n\t            a.item_code=key;\n\t            a.qty=value;\n\t            frappe.db.get_value('Item Price',{'item_code':a.item_code},'price_list_rate', (result)=>{\n\t\t\t               a.rate = result.price_list_rate;\n\t\t\t             \n\t\t\t           });\n                   });\n\n\t\t\t\t}\n\t\t\tcur_frm.refresh_fields(\"items\");\t\n\t\t},\n\t});\n\tfrappe.call({\n\t\t\tmethod: \"cardion.docevents.sales_invoice.get_procedure\",\n\t\t\targs: {\"inpatient\":frm.doc.inpatient},\n\t\t\tcallback: function(r) {console.log('r',r.message,'r');\n\t\t\t\tif (r.message){ console.log('Add Row in Items');\n\t\t\t    Object.entries(r.message).forEach(([key, value])=>{\n\t\t\t\tvar a = cur_frm.add_child(\"items\");    \n\t            a.item_code=key;\n\t            a.qty=value;\n\t            frappe.db.get_value('Item Price',{'item_code':a.item_code},'price_list_rate', (result)=>{\n\t\t\t               a.rate = result.price_list_rate;\n\t\t\t             \n\t\t\t           });\n                   });\n\n\t\t\t\t}\n\t\t\tcur_frm.refresh_fields(\"items\");\t\n\t\t},\n\t});\n\tfrappe.call({\n\t\t\tmethod: \"cardion.docevents.sales_invoice.get_consumables\",\n\t\t\targs: {\"inpatient\":frm.doc.inpatient},\n\t\t\tcallback: function(r) {console.log('r',r.message,'r');\n\t\t\t\tif (r.message){ console.log('Add Row in Items');\n\t\t\t\tObject.entries(r.message).forEach(([key, value])=>{\n\t\t\t\tvar a = cur_frm.add_child(\"items\");    \n\t            a.item_code=key;\n\t            a.qty=value;\n\t            frappe.db.get_value('Item Price',{'item_code':a.item_code},'price_list_rate', (result)=>{\n\t\t\t               a.rate = result.price_list_rate;\n\t\t\t             \n\t\t\t           });\n                   });\n\n\t\t\t\t}\n\t\t\tcur_frm.refresh_fields(\"items\");\t\n\t\t},\n\t});\n\n\t   \n\t\t   \n\t   \n\t\t\n\t} \n\t\n\t\n }\n \n});",
  "view": "Form"
 }
]